<!DOCTYPE html>
<html>
<head>
    <title>PoliPoll Results</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        function grapher(iden, labs, ds){
            var x = [];

            var opt = {responsive: true}
            opt['scales'] = {x: {ticks: {font: {size: 24}}} ,y: {ticks: {font: {size: 20}}, title: {display: true, font: {size: 24}, text: "Percentage"}}}

            if(ds.length==1){
                opt['plugins'] = {legend: {display: false}}
            }

            for(var i = 0; i < ds.length; i++){
                var l = "";
                if(i == 0){
                    l = "Yes"
                } else if(i == 1){
                    l = "No"
                }

                var y = {
                    label: l,
                    data: ds[i],
                    borderWidth: 5,
                    borderRadius: Number.MAX_VALUE
                }
                x.push(y);
            }
            var mydata = {
                    labels: labs,
                    datasets: x
            }
            var ctx = document.getElementById(iden);
            new Chart(ctx, {
                type: 'bar',
                data: mydata,
                options: opt
            });
        }
    </script>
</head>
<body>
    <div class="header">
        <img src="pollipoller_logo.png">
    </div>
    <h1>Here are your PoliPoll results!</h1>

    <form action="/" method="GET">
        <button type ="submit">Back to Dashboard</button>
    </form>

    <div class="chart-wrapper"><h2>Total Number of Responses:<span id="tot"></span></h2></div>
    <div class="chart-wrapper"><h2>Overall Results:</h2><canvas class="result" id="totals"></canvas></div>
    <div class="chart-wrapper"><h2>Results by Gender:</h2><canvas class="result" id="gender"></canvas></div>
    <div class="chart-wrapper"><h2>Results by Age:</h2><canvas class="result" id="age"></canvas></div>
    <div class="chart-wrapper"><h2> Results by Ethnicity:</h2><canvas class="result" id="ethnicity"></canvas></div>
    <div class="chart-wrapper"><h2>Results by Party Affiliation:</h2><canvas class="result" id="party"></canvas></div>
    
    <div class="footer">&copy; Ryan Pettibone 2022</div>
    <script id="insert"></script>
    
</body>
</html>